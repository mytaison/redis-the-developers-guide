{"id":"ba14fb","fileName":"my-bleak-climate-notebook.json","name":"Streams","cells":[{"id":"1e0ff2","type":"markdown","content":"**Notes**\n\n* It is mix of sorted Set and List\n* Mostly used Producer - Consumer scenarios\n* Redis generates id when we add * in XADD command after the index key\n* Consumer groups: Grouping streams together and handling messages internally to avoid repetition of action for same message by another stream in the group"},{"id":"e1a343","type":"redis","content":"XADD fruits * name mango color yellow \nXADD fruits * name banana color yellow \nXADD fruits * name orange color orange\n\n// Read all messages \nXREAD STREAMS fruits 0-0\n\n// Read all messages after the timestamp\nXREAD STREAMS fruits 1713167855677-0\n\n// Read 2 messages\nXREAD COUNT 2 STREAMS fruits 0-0  \n\n// Reading via XRange inclusive the range\nXRANGE fruits 1713169629238-0 1713169629239-0\n// exclusive the range\nXRANGE fruits (1713170151924-0 (1713170151925-0 COUNT 5\n// from time to all future, from all past to time\nXRANGE fruits 1713170200 +\nXRANGE fruits - 1713170200\n\nDEL fruits"},{"id":"1713169009573","type":"redis","content":"// Read message with blocking for a certain time if no message found\n// XREAD BLOCK 3000 STREAMS fruits 1713169330139-0\n\n// if you add count it will not wait for 3 messages to receive \n// XREAD COUNT 3 BLOCK 3000 STREAMS fruits 1713169330139-0\n\n// checking message from now\nXREAD COUNT 3 BLOCK 3000 STREAMS fruits $\n"},{"id":"1713169265820","type":"redis","content":"XADD fruits * name mermalade color orange\nDEL fruits"},{"id":"1713249025289","type":"redis","content":"DEL fruits\n// Publisher\nXGROUP CREATE fruits fruits-group $ MKSTREAM\n// Consumer\nXGROUP CREATECONSUMER fruits fruits-group fruitsConsumer-1\nXGROUP CREATECONSUMER fruits fruits-group fruitsConsumer-2\nXGROUP CREATECONSUMER fruits fruits-group fruitsConsumer-3 \n// Adding \nXADD fruits 10-0 name Banana color Yellow\nXADD fruits 11-0 name Apple color Red\nXADD fruits 12-0 name Pears color Green\n\nXREADGROUP GROUP fruits-group fruitsConsumer-1 COUNT 1 STREAMS fruits >\nXREADGROUP GROUP fruits-group fruitsConsumer-2 COUNT 1 STREAMS fruits > "},{"id":"1713249923757","type":"redis","content":"// Before Acknowledgement\nXINFO GROUPS fruits\nXINFO CONSUMERS fruits fruits-group\n// After Acknowledgement\nXACK fruits fruits-group 10-0\nXINFO GROUPS fruits\nXINFO CONSUMERS fruits fruits-group\n\nDEL fruits"},{"id":"1713278294521","type":"redis","content":"// Claiming long pending messages from other workers/consumers\n\nXAUTOCLAIM fruits fruits-group fruitsConsumer-2 100000 0-0 "},{"id":"1713334963131","type":"redis","content":"hset hash-two a 23\nhget hash-two b\ndel hash-two"}],"createdAt":"2024-04-15T07:50:36.583Z"}